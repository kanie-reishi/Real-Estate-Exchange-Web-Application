<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tạo/Chỉnh Sửa Bất Động Sản</title>
    <!-- Font Awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="/css/bootstrap.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- font-awesome icons -->
    <link href="/css/font.css" type="text/css" rel="stylesheet" />
    <link href="/css/font-awesome.css" rel="stylesheet">
    <!-- font CSS -->
    <link
        href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic'
        rel='stylesheet' type='text/css'>
    <!-- Custom CSS-->
    <link rel="stylesheet" href="/css/style.css">
</head>

<body class="dashboard-page">
    <!-- Navbar -->
    <nav class="main-menu">
        <ul>
            <li>
                <a href="/admin">
                    <i class="fa fa-home nav_icon"></i>
                    <span class="nav-text">
                        Dashboard
                    </span>
                </a>
            </li>
            <li>
                <a href="/admin/realestate-table">
                    <i class="fa-solid fa-city nav-icon"></i>
                    <span class="nav-text">
                        Thông tin BĐS
                    </span>
                </a>
            </li>
            <li>
                <a href="admin/project-table">
                    <i class="fa-solid fa-building nav-icon"></i>
                    <span class="nav-text">
                        Dự án BĐS
                    </span>
                </a>
            </li>
            <li class="has-subnav">
                <a href="javascript:;">
                    <i class="fa-solid fa-folder-plus nav-icon"></i>
                    <span class="nav-text">Địa chính</span>
                    <i class="icon-angle-right"></i><i class="icon-angle-down"></i>
                </a>
                <ul>
                    <li>
                        <a class="subnav-text" href="gallery.html">
                            <i class="fa-solid fa-building-columns"></i>
                            Tỉnh thành
                        </a>
                    </li>
                    <li>
                        <a class="subnav-text" href="calendar.html">
                            <i class="fa-solid fa-landmark"></i>
                            Quận huyện
                        </a>
                    </li>
                    <li>
                        <a class="subnav-text" href="signup.html">
                            <i class="fa-solid fa-building-user"></i>
                            Phường xã
                        </a>
                    </li>
                    <li>
                        <a class="subnav-text" href="login.html">
                            <i class="fa-solid fa-road"></i>
                            Đường phố
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="charts.html">
                    <i class="fa-solid fa-user-group nav-icon"></i>
                    <span class="nav-text">
                        Khách hàng
                    </span>
                </a>
            </li>
            <li>
                <a href="typography.html">
                    <i class="fa-solid fa-user nav-icon"></i>
                    <span class="nav-text">
                        Người dùng
                    </span>
                </a>
            </li>
            <li>
                <a href="tables.html">
                    <i class="fa-solid fa-user-tie nav-icon"></i>
                    <span class="nav-text">
                        Nhà đầu tư
                    </span>
                </a>
            </li>
            <li>
                <a href="maps.html">
                    <i class="fa-solid fa-helmet-safety nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">
                        Nhà thầu xây dựng
                    </span>
                </a>
            </li>
            <li>
                <a href="error.html">
                    <i class="fa-solid fa-compass-drafting nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">
                        Đơn vị thiết kế
                    </span>
                </a>
            </li>
            <li>
                <a href="error.html">
                    <i class="fa-solid fa-map-location-dot nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">
                        Địa chỉ tọa độ
                    </span>
                </a>
            </li>
            <li>
                <a href="error.html">
                    <i class="fa-solid fa-water-ladder nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">
                        Tiện ích
                    </span>
                </a>
            </li>
            <li>
                <a href="error.html">
                    <i class="fa-solid fa-route nav-icon" aria-hidden="true"></i>
                    <span class="nav-text">
                        Kết nối vùng
                    </span>
                </a>
            </li>
        </ul>
        <ul class="logout">
            <li>
                <a href="login.html">
                    <i class="icon-off nav-icon"></i>
                    <span class="nav-text">
                        Logout
                    </span>
                </a>
            </li>
        </ul>
    </nav>
    <section class="wrapper scrollable" style="opacity: 1;">
        <nav class="user-menu">
            <a href="javascript:;" class="main-menu-access">
                <i class="icon-proton-logo"></i>
                <i class="icon-reorder"></i>
            </a>
        </nav>
        <section class="title-bar">
            <div class="logo">
                <h1><a href="/admin"><img src="" alt="" style="display: none;" />RealEstate.com</a></h1>
            </div>
            <div class="w3l_search">
                <form class="d-flex" action="#" method="post">
                    <input type="text" name="search" value="Search" onfocus="this.value = '';"
                        onblur="if (this.value == '') {this.value = 'Search';}" required="">
                    <button class="btn btn-default" type="submit"><i class="fa fa-search"
                            aria-hidden="true"></i></button>
                </form>
            </div>
            <div class="header-right">
                <div class="profile_details_left">
                    <div class="header-right-left">
                        <!--notifications of menu start -->
                        <ul class="nofitications-dropdown">
                            <li class="dropdown head-dpdn">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i
                                        class="fa fa-envelope"></i></a>
                                <ul class="dropdown-menu anti-dropdown-menu w3l-msg">
                                    <li>
                                        <div class="notification_header">
                                            <h3>You have 3 new messages</h3>
                                        </div>
                                    </li>
                                    <li><a href="#">
                                            <div class="user_img"></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor amet</p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li class="odd"><a href="#">
                                            <div class="user_img"></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor amet </p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li><a href="#">
                                            <div class="user_img"></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor amet </p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li>
                                        <div class="notification_bottom">
                                            <a href="#">See all messages</a>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <li class="dropdown head-dpdn">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i
                                        class="fa fa-bell"></i></a>
                                <ul class="dropdown-menu anti-dropdown-menu agile-notification">
                                    <li>
                                        <div class="notification_header">
                                            <h3>You have 3 new notifications</h3>
                                        </div>
                                    </li>
                                    <li><a href="#">
                                            <div class="user_img"></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor amet</p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li class="odd"><a href="#">
                                            <div class="user_img"></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor amet </p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li><a href="#">
                                            <div class="user_img"></div>
                                            <div class="notification_desc">
                                                <p>Lorem ipsum dolor amet </p>
                                                <p><span>1 hour ago</span></p>
                                            </div>
                                            <div class="clearfix"></div>
                                        </a></li>
                                    <li>
                                        <div class="notification_bottom">
                                            <a href="#">See all notifications</a>
                                        </div>
                                    </li>
                                </ul>
                            </li>
                            <div class="clearfix"> </div>
                        </ul>
                    </div>
                    <div class="profile_details">
                        <ul>
                            <li class="dropdown profile_details_drop">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                    <div class="profile_img">
                                        <span class="prfil-img"><i class="fa fa-user" aria-hidden="true"></i></span>
                                        <div class="clearfix"></div>
                                    </div>
                                </a>
                                <ul class="dropdown-menu drp-mnu">
                                    <li> <a href="#"><i class="fa fa-cog"></i> Settings</a> </li>
                                    <li> <a href="#"><i class="fa fa-user"></i> Profile</a> </li>
                                    <li> <a href="#"><i class="fa fa-sign-out"></i> Logout</a> </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="clearfix"> </div>
                </div>
            </div>
            <div class="clearfix"> </div>
        </section>
        <div class="main-grid">
            <div class="agile-grids">
                <!-- Form -->
                <div class="agile-tables">
                    <div class="w3l-table-info">
                        <h2>Tạo/Chỉnh Sửa Bất Động Sản</h2>
                        <form id="realestateForm">
                            <input type="hidden" name="id"> <!-- Hidden field để biết đây là chỉnh sửa -->
                            <div id="images" class="px-4 md:px-0"></div>
                            <div id="videos" class="px-4 md:px-0"></div>
                            <div
                                class="mt-2 md:flex justify-end md:justify-between text-sm text-black-v6 mb-4 mx-4 md:mx-0">
                                <ul class="">
                                    <li class="flex items-center">
                                        <span class="w-1 h-1 rounded-full mr-2 bg-black-v6 flex-shrink-0"></span>Kích
                                        thước ảnh tối thiểu 300x300px. Dung lượng ảnh tối đa 10MB.
                                    </li>
                                    <li class="flex items-center">
                                        <span class="w-1 h-1 rounded-full mr-2 bg-black-v6 flex-shrink-0"></span>Số
                                        lượng ảnh tối thiểu là 1 ảnh, tối đa là 30 ảnh.
                                    </li>
                                    <li class="flex items-center">
                                        <span class="w-1 h-1 rounded-full mr-2 bg-black-v6 flex-shrink-0"></span>Ảnh
                                        đầu tiên tải lên sẽ được dùng để đặt làm ảnh bìa
                                    </li>
                                </ul>
                            </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="title" class="form-label">Tiêu đề<span class="text-red-v6">
                                    *</span></label>
                            <input type="text" class="form-control" id="title" name="title" required autofocus>
                        </div>
                        <div class="col-md-6">
                            <label for="description" class="form-label">Mô tả<span class="text-red-v6">
                                    *</span></label>
                            <textarea class="form-control" id="description" name="description" rows="3"
                                required></textarea>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="type" class="form-label">Loại hình BĐS<span class="text-red-v6">
                                    *</span></label>
                            <select class="form-select" id="type" name="type" required>
                                <option value="0">Đất</option>
                                <option value="1">Nhà ở</option>
                                <option value="2">Căn hộ/Chung cư</option>
                                <option value="3">Văn phòng, Mặt bằng</option>
                                <option value="4">Kinh doanh</option>
                                <option value="5">Phòng trọ</option>
                                <option value="6">Khác</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="request" class="form-label">Nhu cầu<span class="text-red-v6">
                                    *</span></label>
                            <select class="form-select" id="request" name="request" required>
                                <option value="0">Cần bán</option>
                                <option value="1">Cần mua</option>
                                <option value="2">Cho thuê</option>
                                <option value="3">Cần thuê</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="price" class="form-label">Giá<span class="text-red-v6"> *</span></label>
                            <input type="number" class="form-control" id="price" name="price" required min="0">
                        </div>
                        <div class="col-md-6">
                            <label for="priceUnit" class="form-label">Đơn vị giá</label>
                            <select class="form-select" id="priceUnit" name="priceUnit" required>
                                <option value="0">Triệu</option>
                                <option value="1">Tỷ</option>
                                <option value="2">Triệu/m2</option>
                                <option value="3">Tỷ/m2</option>
                                <option value="4">Triệu/ha</option>
                                <option value="5">USD</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="acreage" class="form-label">Diện tích<span class="text-red-v6">
                                    *</span></label>
                            <input type="number" class="form-control" id="acreage" name="acreage" required>
                        </div>
                        <div class="col-md-6">
                            <label for="acreageUnit" class="form-label">Đơn vị diện tích</label>
                            <select class="form-select" id="acreageUnit" name="acreageUnit" required>
                                <option value="0">m2</option>
                                <option value="1">ha</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="province" class="form-label">Tỉnh/Thành phố<span class="text-red-v6">
                                    *</span></label>
                            <select class="form-select" id="select-province" name="province" required>
                                <option value="">Chọn Tỉnh/Thành phố</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="district" class="form-label">Quận/Huyện<span class="text-red-v6">
                                    *</span></label>
                            <select class="form-select" id="select-district" name="district" required>
                                <option value="">Chọn Quận/Huyện</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="ward" class="form-label">Phường/Xã</label>
                            <select class="form-select" id="select-ward" name="ward" required>
                                <option value="">Chọn Phường/Xã</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="street" class="form-label">Đường/Phố</label>
                            <input type="text" class="form-control" id="street" name="street" required>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="address" class="form-label">Địa chỉ cụ thể</label>
                            <input type="text" class="form-control" id="address" name="address" required>
                        </div>
                        <div class="col-md-6">
                            <label for="customer" class="form-label">Khách hàng</label>
                            <input type="text" class="form-control" id="customer" name="customer" required>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="bedroom" class="form-label">Số phòng ngủ</label>
                            <input type="number" class="form-control" id="bedroom" name="bedroom">
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email">
                        </div>
                    </div>

                    <div class="accordion mb-3" id="detailedFieldsAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    Chi tiết
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                                data-bs-parent="#detailedFieldsAccordion">
                                <div class="accordion-body">
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="priceMin" class="form-label">Giá tối
                                                thiểu</label>
                                            <input type="number" class="form-control" id="priceMin" name="priceMin">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="wallArea" class="form-label">Diện tích
                                                tường</label>
                                            <input type="number" class="form-control" id="wallArea" name="wallArea">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="landscapeView" class="form-label">Hướng cảnh
                                                quan</label>
                                            <input type="text" class="form-control" id="landscapeView"
                                                name="landscapeView">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="furnitureType" class="form-label">Loại nội
                                                thất</label>
                                            <input type="text" class="form-control" id="furnitureType"
                                                name="furnitureType">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="legalDoc" class="form-label">Giấy tờ pháp
                                                lý</label>
                                            <input type="text" class="form-control" id="legalDoc" name="legalDoc">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="widthY" class="form-label">Chiều
                                                rộng</label>
                                            <input type="number" class="form-control" id="widthY" name="widthY">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="longX" class="form-label">Chiều dài</label>
                                            <input type="number" class="form-control" id="longX" name="longX">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="streetHouse" class="form-label">Đường vào
                                                nhà</label>
                                            <input type="number" class="form-control" id="streetHouse"
                                                name="streetHouse">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="distance2Facade" class="form-label">Khoảng
                                                cách đến mặt
                                                tiền</label>
                                            <input type="number" class="form-control" id="distance2Facade"
                                                name="distance2Facade">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="adjacentFacadeNum" class="form-label">Số mặt
                                                tiền liền
                                                kề</label>
                                            <input type="number" class="form-control" id="adjacentFacadeNum"
                                                name="adjacentFacadeNum">
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="alleyMinWidth" class="form-label">Chiều rộng
                                                hẻm tối
                                                thiểu</label>
                                            <input type="number" class="form-control" id="alleyMinWidth"
                                                name="alleyMinWidth">
                                        </div>
                                        <div class="col-md-6">
                                            <label for="adjacentAlleyMinWidth" class="form-label">Chiều rộng hẻm
                                                liền kề tối thiểu</label>
                                            <input type="number" class="form-control" id="adjacentAlleyMinWidth"
                                                name="adjacentAlleyMinWidth">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Lưu</button>
                    </form>
                </div>
            </div>
            <!-- //Form -->
        </div>
        </div>
        <!-- footer -->
        <div class="footer">
            <p>© 2024 . All Rights Reserved .</p>
        </div>
        <!-- //footer -->
    </section>

    <!-- Jquery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- Custom JS-->
    <script src="/js/region.js"></script>
    <script>
        $(document).ready(function () {
            // Load Province Data
            loadProvinceData();
            // On Province Selected
            $('#select-province').change(function () {
                const provinceId = $(this).val();
                onProvinceSelectChange(provinceId);
            });
            // On District Selected
            $('#select-district').change(function () {
                const districtId = $(this).val();
                onDistrictSelectChange(districtId);
            });
            $('#realestateForm').on('submit', function (e) {
                e.preventDefault();
                const formData = {
                    title: $('#title').val(),
                    description: $('#description').val(),
                    address: $('#address').val(),
                    bedroom: $('#bedroom').val(),
                    bathroom: $('#bathroom').val(),
                    direction: $('#direction').val(),
                    verify: $('#verify').val(),
                    type: $('#type').val(),
                    request: $('#request').val(),
                    price: $('#price').val(),
                    priceUnit: $('#priceUnit').val(),
                    acreage: $('#acreage').val(),
                    acreageUnit: $('#acreageUnit').val(),
                    // Fields from detailedFieldsAccordion
                    priceMin: $('#priceMin').val(),
                    wallArea: $('#wallArea').val(),
                    landscapeView: $('#landscapeView').val(),
                    furnitureType: $('#furnitureType').val(),
                    legalDoc: $('#legalDoc').val(),
                    widthY: $('#widthY').val(),
                    longX: $('#longX').val(),
                    streetHouse: $('#streetHouse').val(),
                    distance2Facade: $('#distance2Facade').val(),
                    adjacentFacadeNum: $('#adjacentFacadeNum').val(),
                    alleyMinWidth: $('#alleyMinWidth').val(),
                    adjacentAlleyMinWidth: $('#adjacentAlleyMinWidth').val(),
                    // Add other fields heretype: $('#type').val(),
                    request: $('#request').val(),
                    price: $('#price').val(),
                    priceUnit: $('#priceUnit').val(),
                    acreage: $('#acreage').val(),
                    acreageUnit: $('#acreageUnit').val(),
                    // Add other fields here
                };

                $.ajax({
                    url: '/user/realestate', // Đường dẫn API để lưu bất động sản
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify(formData),
                    success: function (response) {
                        alert('Lưu thành công!');
                    },
                    error: function (error) {
                        alert('Có lỗi xảy ra, vui lòng thử lại.');
                    }
                });
            });
        });
    </script>
</body>